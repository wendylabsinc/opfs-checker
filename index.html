<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/opfs-checker/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>OPFS Checker</title>
    <script type="module" crossorigin src="/opfs-checker/assets/index-gIAA9YWB.js"></script>
    <link rel="stylesheet" crossorigin href="/opfs-checker/assets/index-B-IB_Aiy.css">
  </head>
  <body>
    <div id="app" class="p-4 flex flex-col gap-4">
      <p>
        Learn more about OPFS:
        <a
          href="https://developer.mozilla.org/en-US/docs/Web/API/File_System_API/Origin_private_file_system"
          target="_blank"
          class="text-blue-500"
          >MDN</a
        >
        or from web.dev at
        <a
          href="https://web.dev/articles/origin-private-file-system"
          target="_blank"
          class="text-blue-500"
          >web.dev</a
        >
      </p>
      <h2>Does this current browser support OPFS?</h2>
      <table class="w-full border-collapse border border-gray-300">
        <tbody>
          <tr>
            <td class="border border-gray-300 px-4 py-2 font-semibold">
              Your Browser
            </td>
            <td class="border border-gray-300 px-4 py-2" id="browser-agent"></td>
          </tr>
          <tr>
            <td class="border border-gray-300 px-4 py-2 font-semibold">
              OPFS Support
            </td>
            <td class="border border-gray-300 px-4 py-2" id="opfs-support"></td>
          </tr>
          <tr>
            <td class="border border-gray-300 px-4 py-2 font-semibold">
              Current Disk Usage
            </td>
            <td class="border border-gray-300 px-4 py-2" id="disk-usage"></td>
          </tr>
          <tr>
            <td class="border border-gray-300 px-4 py-2 font-semibold">
              Estimated Maximum Disk Size
            </td>
            <td
              class="border border-gray-300 px-4 py-2"
              id="estimated-maximum-disk-size"
            ></td>
          </tr>
          <tr></tr>
            <td class="border border-gray-300 px-4 py-2 font-semibold">
              Percent Used
            </td>
            <td
              class="border border-gray-300 px-4 py-2"
              id="percent-used"
            ></td>
          </tr>
        </tbody>
      </table>
      <ul>
        <li>
          To check if OPFS is supported, run the following command in the
          console: <br /><code class="bg-gray-100 m-4 rounded-md p-2 block whitespace-pre-wrap">if (navigator.storage && navigator.storage.getDirectory) {
    console.log("OPFS is supported in this browser.");
} else {
    console.log("OPFS is not supported in this browser.");
}</code>
        </li>
        <li>
          To get the estimated maximum disk size, run the following command in
          the console: <br /><code class="bg-gray-100 m-4 rounded-md p-2 block whitespace-pre-wrap">async function getEstimatedQuota() {
  const estimate = await navigator.storage.estimate();
  const quota = estimate.quota;
  console.log('Estimated quota:', quota);
  return quota;
}

getEstimatedQuota();</code>
        </li>
        <li>
          To get the disk usage: <br /><code
            class="bg-gray-100 m-4 rounded-md p-2 block whitespace-pre-wrap"
            >async function getDiskUsage() {
  const estimate = await navigator.storage.estimate();
  console.log('Estimated usage:', estimate.usage);
  return estimate.usage;
}

getDiskUsage();</code
          >
        </li>
      </ul>
    </div>
  </body>
</html>
